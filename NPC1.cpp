#include <iostream>
#include <string>
#include <thread>
#include <chrono>
#include <algorithm>
#include <cctype>

void person11(int& qwest11, int& armor, int& killCount)
{
    if (qwest11 == '0')
    {
        std::cout << "Ты с неба свалился? Что ж, кажется, не только у нас наступили трудные времена. Недавно наши ученые разработали сыворотку суперсилы, которая делает людей бессмертными. Ну... Они так думали. На самом деле эта сыворотка постепенно убивает мозг человека и превращает его в зомби. Если хочешь помочь нам, я могу кое-что тебе предложить. Но сначала я хочу убедиться в чистоте твоих намерений. В сундуке напротив тебя лежит меч. Возьми его и убей семерых злобных зомби!\n";
        qwest11 = '1';
    }
    else if (qwest11 == '1' && killCount < 7)
    {
        using namespace std::this_thread;
        using namespace std::chrono;

        std::cout << "Ты все еще не поднял оружие на этих тварей? Я должен спросить напрямую: ты точно не один из них? Твоя плоть цела, глаза ясны... но что скрывается за этой ясностью? Не тихий ли это укор мертвого разума, притворяющегося живым?" << std::endl;
        sleep_for(milliseconds(2200));

        std::cout << "Хм... Сам факт, что я дышу и могу произносить эти слова, пока ты слушаешь, — кажется, ответ очевиден. Ты не обратился против меня. Значит, ты еще не зомби. Но это порождает куда более мучительную загадку: почему же ты отказываешься сражаться? В твоих руках сила, а вокруг — лишь ходячая гниль. В чем причина твоего бездействия? Трусость? Или... нечто иное?" << std::endl;
        sleep_for(milliseconds(2800));

        std::cout << "Но если подумать... Разве они всегда были монстрами? Нет. Каждый из них когда-то был человеком. У них были имена, воспоминания, возможно, семьи. Они любили и страдали. Часть их мозга, та, что кричит о человечности, — она ведь должна быть там, глубоко внутри, подавленная вирусом? Мы уничтожаем зараженную конечность, чтобы спасти тело. А что, если это не конечность? Что, если это все еще человек, просто тяжело, отчаянно болен? Возможно, ты видишь именно это. Возможно, твое бездействие — это высшая, титаническая надежда. Ты поступаешь правильно, отказываясь стать палачом." << std::endl;
        sleep_for(milliseconds(3200));

        std::cout << "Однако... мой разум тут же восстает против этой сладостной мысли. А как же сиюминутная реальность? Прямо сейчас, в эту самую секунду, их когти и челюсти рвут плоть тех, кто еще не утратил себя. Их жертвы кричат — по-настоящему, по-человечески. Каждый миг нашего философствования стоит десятков, сотен жизней. Не проще ли, не честнее ли принести в жертву тех, чье спасение — лишь призрачная теория, ради тех, чье сердце еще бьется здесь и сейчас? Разве это не наш главный долг — защитить живых?" << std::endl;
        sleep_for(milliseconds(3000));

        std::cout << "Но кто эти живые? Кроме нас с тобой... Есть ли еще кто-то? Мы не слышим радиопереговоров, не видим сигналов. Тишина. Эта всепоглощающая тишина страшнее любого рыка. И я... я не решаюсь подняться наверх. Эта база стал нашей скорлупой, нашей могилой и нашим убежищем одновременно. Что ждет нас там? Бескрайнее море мертвой плоти, жаждущей нашей? Или, что еще ужаснее, полная, окончательная пустота, подтверждающая, что мы — последние?" << std::endl;
        sleep_for(milliseconds(2800));

        std::cout << "НО... Погоди минутку... А что, если я все представляю в слишком мрачном свете? Что, если наш страх — наш главный враг? Возможно... НЕТ, ЭТОГО НЕ МОЖЕТ БЫТЬ!!! Слишком жестоко надеяться. Хотя... Кто знает, на что способны люди, когда их загнали в угол? Что, если власти, или армия, или просто кучка выживших смогли отбиться? Что если они восстановили порядок на каких-то клочках земли? Что если там, наверху, уже светит солнце на очищенные улицы, а мы тут сидим, как слепые кроты, в царстве страха и полумрака?" << std::endl;
        sleep_for(milliseconds(3400));

        std::cout << "Если они победили... Они придут за нами. Рано или поздно. Обязаны прийти. Чтобы проверить каждое укрытие, каждого выжившего. Или... или нет. Возможно, мы для них — лишь статистика. Возможно, мир стал другим, и в нем нет места тем, кто отсиживался в норах. Может, они построили новые стены, и мы остались по ту сторону — не среди мертвых, но и не среди спасенных. Заблудшие души в подземном чистилище." << std::endl;
        sleep_for(milliseconds(2600));

        std::cout << "Впрочем... Иди. Иди и сделай то, что должен. Возможно, твой путь — не мой. Мои размышления — это лабиринт, из которого нет выхода. Они парализуют. А тебе нужна ясность действия. Так что оставь меня с моими призраками и вопросами." << std::endl;
        sleep_for(milliseconds(2000));

        std::cout << "Иди. Убей зомби. Спаси тех, кого можешь спасти. И... если найдешь там, наверху, тот солнечный мир... вспомни, что под землей тоже могут ждать. Хотя бы для того, чтобы сообщить, надеяться ли нам, или же пора наконец отпустить." << std::endl;
    }
    else if (qwest11 == '1' && killCount >= 7)
    {
        std::cout << "О! Я вижу, ты убил их, что ж, кажется, ты все-таки на нашей стороне, поэтому я дам тебе броню, теперь ты сможешь пережить один укус зомби без последствий. И запомни! Если надеть одну броню поверх другой, ничего не произойдет, у тебя все равно будет 1 броня." << std::endl;
        armor++;
        qwest11 = '2';
    }
    else
    {
        std::cout << "Я уже помог тебе, как мог, неужели я ошибся в тебе? Покажи, что я не ошибся, помоги нам." << std::endl;
    }
}

void person12(int& qwest22, int& keys)
{
    if (qwest22 == '0')
    {
        std::string answer = "";
        std::cout << "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\n";
        std::cout << "А? Ты не собираешься убивать меня? Ты не один из них? Остались ли еще живые люди? Ты действительно человек? Что ж, не думай, что я тебе доверяю, но мне все равно нужно проверить, действительно ли ты человек. Если это так, тогда ответь на мой вопрос.\n";
        std::cout << "Я - Сущность, чья природа заставляет меня всегда говорить правду, но моя сила позволяет мне создавать любой объект, даже логически невозможный. Ты стоишь передо мной, и ты должен задать мне один единственный вопрос. Какой вопрос ты должен задать мне, чтобы я, в силу своей природы, неспособная лгать, но столь же неспособная отказаться от использования своей силы, была вынуждена создать и уничтожить самый первый камень, который лег в основание твоего дома, тем самым предоставив тебе неопровержимое доказательство как моей правдивости, так и моего всемогущества, не нарушив при этом логическую целостность этого мира?\n";

        while (true)
        {
            std::getline(std::cin, answer);

            std::string processed = answer;
            if (!processed.empty() && ispunct(processed.back())) processed.pop_back();
            std::transform(processed.begin(), processed.end(), processed.begin(), ::tolower);

            if (processed == "твой вопрос" ||
                processed == "вопрос, который ты только что задал" ||
                processed == "вопрос, который ты задал" ||
                processed == "твоё предыдущее предложение" ||
                processed == "то, что ты спросил" ||
                processed == "что ты только что спросил" ||
                processed == "вопрос, который ты произнёс" ||
                processed == "то, о чём ты спросил")
            {
                std::cout << "Что ж, ты переиграл меня, ты настоящий человек, теперь я уверен в тебе и готов дать тебе кое-что. Это универсальный ключ, который откроет тебе любую дверь, кроме центральных ворот, которые электронные.\n";
                keys++;
                qwest22 = '2';
                break;
            }
            else
            {
                std::cout << "Неправильно! Жаль, что у меня нет при себе оружия и я не могу убить тебя, но пока я жив, я все равно буду давать тебе шансы, потому что раз ты не убил меня, у меня есть основания полагать, что ты человек. Итак, какой твой новый ответ?\n";
                continue;
            }
        }
    }
    else
    {
        std::cout << "Ты уже ответил на мой вопрос, и мне больше нечего тебе предложить.\n";
    }
}

void person13(int& qwest33, int& magicItem)
{
    if (qwest33 == '0')
    {
        std::cout << "О, наконец-то живая душа! Я заперт здесь... я даже не знаю, как долго. Эти твари почему-то не трогают меня. Может быть, потому что я был одним из первых подопытных? Неважно. Слушай, мне нужна твоя помощь. В этом комплексе есть особый артефакт - 'Ядро Стабилизации'. Оно выглядит как светящийся синий кристалл размером с кулак.\n";
        std::cout << "Оно очень важно для меня. Лично. Без него я... Я чувствую, как мой рассудок ускользает. Сыворотка все еще в моей крови, понимаешь. Ядро подавляет ее эффект. Пожалуйста, найди его и принеси мне. Умоляю. Мне нечего предложить тебе взамен, кроме... кроме моей вечной благодарности. И, возможно, знания, что ты спас то, что осталось от моей человечности.\n";
        qwest33 = '1';
    }
    else if (qwest33 == '1' && magicItem == 0)
    {
        std::cout << "Ты уже нашел Ядро? Оно должно быть в главном лабораторном секторе. Или, может быть, в реакторном зале? Или... погоди, может охрана переместила его в безопасную зону до того, как все рухнуло? Я уже не могу четко вспомнить. Воспоминания приходят фрагментами... Иногда мне кажется, что я вижу его свечение краем глаза, но это просто очередная галлюцинация.\n";
        std::cout << "Пожалуйста, поторопись. Каждый час без него ощущается так, будто мои мысли становятся все меньше... моими. Иногда я смотрю на свои руки и удивляюсь, действительно ли они двигаются, или мне это только кажется. Найди Ядро. Пожалуйста.\n";
    }
    else if (qwest33 == '1' && magicItem == 1)
    {
        std::cout << "Это... это Ядро? Ты нашел его! Отдай мне его! Быстрее!\n";
        std::cout << "Спасибо... Спасибо... Я чувствую, как оно действует. Шум в голове стихает. Но...\n";
        std::cout << "Знаешь, я солгал тебе. Ядро не подавляет сыворотку. Оно усиливает ее. Экспоненциально. Через несколько часов я стану чем-то... намного хуже тех зомби снаружи. И этот кристалл даст мне власть над всеми ними.\n";
        std::cout << "Почему ты помог мне? Потому что я хорошо попросил? Как прекрасно наивно. А теперь беги. Пока еще можешь.\n";
        magicItem = 0;
        qwest33 = '2';
    }
    else
    {
        std::cout << "Т-т-ты все еще здесь? Я п...п-предупреждал тебя. Превращение началось. Ты сл...лышишь? Ш...шёпот в стенах? Он... зо...вут мен... сво...м ко...м. УХОДИ СЕЙЧАС, и... ты ст...нешь мо...\n";
        std::cout << "*Его бездушное тело падает на пол, будто он был слишком слаб для этого мира.\n";
    }
}

void person14(int& bomb)
{
    if (bomb == 0)
    {
        std::string frase = "";
        std::cout << "Ты человек? Если так, ты должен уметь говорить? Так что, можешь сказать мне что-нибудь?";
        std::cin >> frase;
        std::cout << "O_O ТЫ СДЕЛАЛ ЭТО!!! Значит, я дам тебе БОМБУУУУ!\n";
        bomb = 1;
    }
    else
    {
        std::cout << "Zzz... ZZzzzzz...........";
    }
}

void persons1(int& playerX, int& playerY, int& qwest11, int& qwest12, int& qwest13, int& qwest14, int& armor, int& keys, int& killCount, int& magicItem, int& bomb)
{
    if ((playerX == 1 && playerY == 22) || (playerX == 2 && playerY == 21))
    {
        person11(qwest11, armor, killCount);
    }
    else if ((playerX == 6 && playerY == 15) || (playerX == 5 && playerY == 14))
    {
        person12(qwest12, keys);
    }
    else if ((playerX == 28 && playerY == 19) || (playerX == 27 && playerY == 18))
    {
        person13(qwest13, magicItem);
    }
    else if ((playerX == 8 && playerY == 50) || (playerX == 9 && playerY == 49))
    {
        person14(bomb);
    }
}